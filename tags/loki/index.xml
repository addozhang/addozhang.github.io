<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Loki on 乱世浮生</title><link>https://atbug.com/tags/loki/</link><description>Recent content in Loki on 乱世浮生</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Sat, 22 Feb 2025 17:30:48 +0800</lastBuildDate><atom:link href="https://atbug.com/tags/loki/index.xml" rel="self" type="application/rss+xml"/><item><title>从零开始：使用 OpenTelemetry Collector 构建强大的日志处理流水线</title><link>https://atbug.com/from-zero-building-a-powerful-log-processing-pipeline-with-opentelemetry-collector/</link><pubDate>Sat, 22 Feb 2025 17:30:48 +0800</pubDate><guid>https://atbug.com/from-zero-building-a-powerful-log-processing-pipeline-with-opentelemetry-collector/</guid><description>在 上篇文章 中，我们通过基于 Kubernetes 注解的 OpenTelemetry 动态发现为应用添加了日志采集的能力。从 OpenTelemetry Collector 日志我们可以看到为两个示例应用创建了 FileLog 接收器 来采集日志。
在本文中，我们将深入探索 OpenTelemetry Collector 的 FileLog 日志接收器的使用。
前文回顾 首先回看下上篇文章的结尾，Otel 的 Kubernetes Observer 发现了带有指定注解或者符合接收器创建规则的 Pod，自动为其创建了 FileLog 接收器。
我们将日志中 Reciver Creator 通过内置配置模板创建的接收器，转换为 OpenTelemetry Collector 配置文件：
config: receivers: filelog: include: - &amp;#34;/var/log/pods/default_java-sample-77b6d8f9c5-5zzh5_e6c5ca2a-6c3f-4ae4-89a6-34ca5cd9a3fa/java-sample/*.</description></item><item><title>基于 Kubernetes 注解的 OpenTelemetry 动态发现：打造自服务的可观测方案</title><link>https://atbug.com/self-service-observability-with-kubernetes-annotations-and-opentelemetry/</link><pubDate>Sat, 15 Feb 2025 22:23:15 +0800</pubDate><guid>https://atbug.com/self-service-observability-with-kubernetes-annotations-and-opentelemetry/</guid><description>背景 在云原生时代，Kubernetes 已经成为容器编排的事实标准，越来越多的企业将其作为核心基础设施来运行和管理现代化应用。然而，随着微服务架构的普及和容器化工作负载的动态性增强，传统的监控和可观测性工具逐渐暴露出局限性——静态配置难以应对快速变化的环境，手动维护监控规则的成本也变得越来越高。
传统的监控方式通常依赖于集中式的配置管理，即由管理员预先定义好需要监控的目标和服务。这种方式不仅缺乏灵活性，还容易导致配置更新滞后，无法及时反映集群中的实际状态，还伴随着出错的风险。这种挑战，即使是作为开放标准的可观测性框架 OpenTelemetry 也无法避免。
不过 OpenTelemetry 通过 Reciver Creator 和 Kubernetes Observer 特性可以解决这个问题，实现基于 Kubernetes 注解的 OpenTelemetry Collector 动态发现功能。
工作原理 Kubernetes Observer 负责检测 Pod 及其元数据（如暴露的端口、注解等）。Observer 除了支持 Kubernetes API，还支持 Docker API（1.24+）、ECS API、ECS Tasks 元数据端点、Host。 Receiver Creator 根据这些信息动态实例化适当的接收器（如文件日志接收器）。Receiver Creator 可以支持 log、metrics 和 trace 接收器的创建。 这一功能通过将监控配置的控制权下放至开发人员，显著简化了可观测性管理的复杂性。</description></item><item><title>使用 OpenTelemetry 和 Loki 实现高效的应用日志采集和分析</title><link>https://atbug.com/efficient-app-log-collection-analysis-opentelemetry-loki/</link><pubDate>Sun, 24 Dec 2023 23:30:45 +0800</pubDate><guid>https://atbug.com/efficient-app-log-collection-analysis-opentelemetry-loki/</guid><description>2025.2.15 更新：支持 Loki 3.3.2。
在之前的文章陆续介绍了 如何在 Kubernetes 中使用 Otel 的自动插桩 以及 Otel 与 服务网格协同实现分布式跟踪，这两篇的文章都将目标聚焦在分布式跟踪中，而作为可观测性三大支柱之一的日志也是我们经常使用的系统观测手段，今天这篇文章就来体验下应用日志的操作闭环。
背景 OpenTelemetry 简介 OpenTelemetry （以下简称 Otel）是一个开源项目，旨在为分布式追踪、度量和日志提供统一的标准，简化应用程序的观测性（Observability）。它提供了一系列工具和 API，用于收集和传输应用程序的性能数据和日志，帮助开发者和运维团队更好地理解系统的行为。功能包括自动和手动检测应用程序的追踪数据，收集关键度量指标，以及捕获和传输日志。Otel 支持多种编程语言和框架，可以与多个后端系统集成，如 Prometheus、Jaeger、Elasticsearch 等。
Log 是 OpenTelemetry 项目的一部分，旨在提供一种标准化的方式来收集、传输和存储日志数据。
Loki 简介 Loki 是 Grafana Labs 开发的一个水平可扩展、高可用性、多租户的日志聚合系统，专为效率和易用性而设计。与传统的日志聚合系统不同，Loki 主要索引日志内容的元数据而不是内容本身，这使得它既轻量又高效。Loki 采用了与 Prometheus 类似的标签系统，使得日志查询更加灵活和强大。常用于存储和查询大量日志数据，特别是与 Grafana 结合使用时，提供了强大的日志可视化和分析能力。</description></item></channel></rss>